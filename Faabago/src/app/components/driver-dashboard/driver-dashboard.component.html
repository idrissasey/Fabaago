<ion-content class="driver-dashboard"

    [fullscreen]="true"
    class="ion-padding"
    [style.backgroundImage]="'url(' + backgroundImage + ')'"
    [style.backgroundSize]="'cover'">

    <div class="form-wrapper">
    <h1>Tableau de bord du conducteur</h1>
        <!-- Form Container -->
        <div class="form-container">
    <!-- Profil du conducteur -->

        <h2>Profil</h2>
        <div class="profile-picture">
            <img [src]="driverProfile.picture" alt="Photo de profil" />
        </div>
        <ion-label>Nom : {{ driverProfile.name }}</ion-label>
        <ion-label>Prénom : {{ driverProfile.surname }}</ion-label>
        <ion-label>Email : {{ driverProfile.email }}</ion-label>
        <ion-label>Type : {{ driverProfile.type_user }}</ion-label>
        <ion-label>Téléphone : {{ driverProfile.tel_nita }}</ion-label>

        <!-- Afficher les images si type_user est "Taximan classique" -->

        <div *ngIf="driverProfile.type_user === 'classic' && driverProfile.taxiLicencePicture && driverProfile.taxiLicencePicture !== '' && driverProfile.taxiLicencePicture !== null && driverProfile.driverLicencePicture && driverProfile.driverLicencePicture !== '' && driverProfile.driverLicencePicture !== null; else addLicenceAndTaxiLicence" class="additional-pictures">
            <div class="small-picture">
                <img [src]="driverProfile.taxiLicencePicture" alt="Licence Taxi" />
            </div>
            <div class="small-picture">
                <img [src]="driverProfile.driverLicencePicture" alt="Permis de conduire" />
            </div>
        </div>
        <ng-template #addLicenceAndTaxiLicence>
            <ng-container *ngIf="driverProfile.type_user === 'classic'; else addOnlyLicence">

                <ion-item>

                    <ion-button expand="block" (click)="addTaxiLicenceF()">Ajouter la licence Taxi</ion-button>


                    <ion-button expand="block" (click)="addLicenceF()">Ajouter le permis de conduire</ion-button>
                </ion-item>



                <ion-label >En  Tant que Taximan Votre compte est bloqué tant que la licence Taxi et le permis ne sont pas ajoutés. Vous ne recevrez pas de request.</ion-label>
            </ng-container>
            <ng-template #addOnlyLicence>
                <ion-button (click)="this.addLicenceF()">Ajouter le permis de conduire</ion-button>
                <ion-label>Votre compte est bloqué tant que le permis de conduire n'est pas ajouté. Vous ne recevrez pas de request.</ion-label>
            </ng-template>
        </ng-template>



    <!-- Notifications -->
    <ion-item *ngIf="(driverProfile.type_user === 'classic' && driverProfile.taxiLicencePicture && driverProfile.taxiLicencePicture !== '' && driverProfile.taxiLicencePicture !== null) || (driverProfile.type_user !== 'classic' && driverProfile.driverLicencePicture && driverProfile.driverLicencePicture !== '' && driverProfile.driverLicencePicture !== null)">
        <h2>Notifications</h2>
        <div *ngIf="notifications.length > 0; else noNotifications">
            <ul>
                <li *ngFor="let notification of notifications">
                    <ion-label>{{ notification.message }}</ion-label>
                    <ion-button (click)="acceptNotification(notification.id)">Accepter</ion-button>
                    <ion-button (click)="rejectNotification(notification.id)">Rejeter</ion-button>
                </li>
            </ul>
        </div>
        <ng-template #noNotifications>
            <ion-label>Aucune notification pour le moment.</ion-label>
        </ng-template>
    </ion-item>

    <!-- Historique des courses -->
    <ion-item>
        <h2>Historique des courses</h2>
        <ul>
            <li *ngFor="let ride of rideHistory">
                <ion-label>Course : {{ ride.from }} -> {{ ride.to }}</ion-label>
                <ion-label>Montant : {{ ride.fare }} €</ion-label>
            </li>
        </ul>
    </ion-item>
        </div>
    <!-- Gains totaux -->
    <ion-item>
        <h2>Gains totaux</h2>
        <ion-label>{{ totalGain }} €</ion-label>
    </ion-item>
        <ion-item>

            <ion-button (click)="disconect()">Deconnexion</ion-button>
        </ion-item>
    </div>
</ion-content>
